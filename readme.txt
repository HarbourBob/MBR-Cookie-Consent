=== MBR Cookie Consent ===
Contributors: madebyrobert
Donate link: https://littlewebshack.com/donate
Tags: cookie consent, gdpr, ccpa, privacy, cookie banner, cookies, iab tcf, google consent mode
Requires at least: 5.8
Tested up to: 6.9.1
Requires PHP: 7.4
Stable tag: 1.4.1
License: GPLv2 or later
License URI: https://www.gnu.org/licenses/gpl-2.0.html

Enterprise-grade GDPR/CCPA compliant cookie consent with IAB TCF v2.3, Google Consent Mode v2, 40+ languages, WCAG accessibility, and privacy policy generator.

== Description ==

MBR Cookie Consent is the most comprehensive, enterprise-grade cookie consent management plugin for WordPress - completely free. Built for publishers, e-commerce sites, and businesses that take privacy seriously.

= ðŸš€ Why Choose MBR Cookie Consent? =

**100% Free. Forever.** All premium features included at no cost - no upsells, no restrictions, no hidden fees.

**Enterprise-Grade.** Used by professional publishers, advertisers, and agencies worldwide.

**Easy Setup.** Configure in 5 minutes with intelligent defaults and one-click policy generation.

**Future-Proof.** Regular updates for new privacy regulations and consent frameworks.

= ðŸŽ¯ Core Features =

**Consent Management**
âœ“ Customizable cookie banner (4 layouts)
âœ“ Automatic script blocking until consent
âœ“ Granular category-level control
âœ“ Preference center for users
âœ“ Consent logging with audit trail
âœ“ CSV export for compliance records
âœ“ Revisit consent button (floating icon)

**Policy Generators**
âœ“ **Cookie Policy Generator** - One-click creation
âœ“ **Privacy Policy Generator** - Intelligent, feature-based generation
âœ“ Automatic e-commerce detection
âœ“ Analytics & advertising detection
âœ“ GDPR, CCPA, IAB TCF sections
âœ“ Third-party service disclosure

**Cookie Management**
âœ“ Automatic cookie scanner
âœ“ Script blocking by category
âœ“ Cookie detection & categorization
âœ“ Blocked script management
âœ“ Real-time script unblocking

= ðŸŒ Internationalization (40+ Languages) =

**Auto-Translation**
âœ“ Automatic browser language detection
âœ“ 40+ languages supported out-of-the-box
âœ“ Zero configuration required
âœ“ Professional quality translations

**Languages Include:**
English, Spanish, French, German, Italian, Portuguese, Dutch, Polish, Russian, Japanese, Chinese, Korean, Arabic, Turkish, Swedish, Danish, Finnish, Norwegian, Czech, Hungarian, Romanian, Greek, Bulgarian, Ukrainian, Croatian, Slovak, Slovenian, Estonian, Latvian, Lithuanian, Thai, Vietnamese, Indonesian, Malay, Hebrew, Hindi, Bengali, Persian, Catalan, Serbian, Afrikaans, Albanian, Icelandic, Irish

**Multilingual Plugin Support**
âœ“ WPML integration (full string registration)
âœ“ Polylang integration (complete support)
âœ“ Automatic detection and setup
âœ“ Category & description translation

= â™¿ WCAG 2.1 AA Accessibility =

**Screen Reader Support**
âœ“ ARIA live regions for announcements
âœ“ Proper ARIA labels and roles
âœ“ Semantic HTML structure
âœ“ Dialog roles for modals

**Keyboard Navigation**
âœ“ Full Tab/Shift+Tab support
âœ“ Focus trap in modals
âœ“ Escape key closes dialogs
âœ“ Enter activates buttons
âœ“ Logical tab order

**Visual Accessibility**
âœ“ WCAG 2.1 AA focus indicators
âœ“ High contrast mode support
âœ“ Sufficient color contrast
âœ“ Reduced motion support
âœ“ Clear visual hierarchy

= ðŸ¢ Advanced Consent Frameworks =

**Google Consent Mode v2**
âœ“ All 7 consent types
âœ“ ad_storage, ad_user_data, ad_personalization
âœ“ analytics_storage, functionality_storage
âœ“ personalization_storage, security_storage
âœ“ Ads data redaction
âœ“ URL passthrough
âœ“ Works with GA4, Google Ads, GTM

**Microsoft UET Consent Mode**
âœ“ Bing Ads compliance
âœ“ Automatic tag integration
âœ“ Default deny for EU
âœ“ Real-time consent updates

**IAB TCF v2.3 (Transparency & Consent Framework)**
âœ“ Full __tcfapi implementation
âœ“ TC String generation
âœ“ 10 standard purposes
âœ“ 2 special features
âœ“ euconsent-v2 cookie
âœ“ Global Vendor List ready
âœ“ Publisher country code
âœ“ Purpose One Treatment
âœ“ Event listener support

**Google Additional Consent Mode (ACM)**
âœ“ AC String generation
âœ“ Google Ad Tech Providers
âœ“ Works outside IAB GVL
âœ“ Google Ads, AdSense, DoubleClick
âœ“ Campaign Manager 360, DV360
âœ“ Funding Choices compatible

= ðŸŽ¨ Enhanced Customization =

**Banner Layouts**
âœ“ Bar (top or bottom)
âœ“ Box (bottom-left corner)
âœ“ Box (bottom-right corner)
âœ“ Popup (center with overlay)

**Page Controls**
âœ“ Hide on login pages
âœ“ Hide on checkout pages
âœ“ Hide on cart pages
âœ“ Hide on account pages
âœ“ URL pattern exclusions
âœ“ Wildcard support

**Design Options**
âœ“ Custom colors
âœ“ Logo upload
âœ“ Custom CSS editor
âœ“ Button text customization
âœ“ Position control
âœ“ Animation settings

**Advanced Features**
âœ“ Subdomain consent sharing
âœ“ Custom root domain
âœ“ Cookie domain override
âœ“ Cookie path configuration

= ðŸ“Š Compliance Standards =

âœ“ GDPR (General Data Protection Regulation)
âœ“ CCPA (California Consumer Privacy Act)
âœ“ ePrivacy Directive (Cookie Law)
âœ“ PECR (UK Privacy Regulations)
âœ“ IAB Europe TCF v2.3
âœ“ WCAG 2.1 Level AA
âœ“ Section 508 (US Accessibility)
âœ“ ADA Title III
âœ“ COPPA (Children's Privacy)

= ðŸ”Œ Works With Everything =

**E-commerce**
WooCommerce, Easy Digital Downloads

**Analytics**
Google Analytics 4, Matomo, Monster Insights

**Advertising**
Google Ads, AdSense, IAB vendors, programmatic

**Forms**
Contact Form 7, Gravity Forms, Ninja Forms, Formidable

**Email**
MailChimp, Newsletter, MailPoet, Sendinblue

**Page Builders**
Elementor, Beaver Builder, Divi, WPBakery

**Multilingual**
WPML, Polylang

**Caching**
WP Rocket, W3 Total Cache, WP Super Cache, Autoptimize

**Social**
Facebook Pixel, Twitter, LinkedIn tracking

= ðŸŽ“ Perfect For =

âœ“ **Publishers** - IAB TCF for programmatic advertising
âœ“ **E-commerce** - GDPR/CCPA for online stores
âœ“ **Agencies** - Client sites with professional compliance
âœ“ **SaaS** - Multi-tenant consent management
âœ“ **Membership Sites** - User data protection
âœ“ **International Sites** - Multi-language support
âœ“ **Blogs** - Simple cookie compliance
âœ“ **Enterprise** - Advanced frameworks and logging

= ðŸ”’ Privacy & Security =

âœ“ IP anonymization (GDPR compliant)
âœ“ Secure cookie storage (SameSite, HttpOnly)
âœ“ No external requests (all local)
âœ“ No tracking (respects user privacy)
âœ“ Open source (transparent code)
âœ“ Regular security updates

= ðŸ’Ž Premium Features (All Free) =

Other plugins charge for these. We don't:

âœ“ IAB TCF v2.3 framework
âœ“ Google Consent Mode v2
âœ“ Microsoft UET Consent Mode
âœ“ Google Additional Consent Mode
âœ“ 40+ language auto-translation
âœ“ WCAG accessibility compliance
âœ“ Privacy Policy generator
âœ“ Cookie Policy generator
âœ“ Subdomain consent sharing
âœ“ Custom CSS editor
âœ“ Advanced analytics
âœ“ Page-specific controls
âœ“ URL exclusions
âœ“ Unlimited sites
âœ“ Unlimited consent logs
âœ“ Full feature access

== Installation ==

= Quick Install (Recommended) =

1. Log in to WordPress admin
2. Go to Plugins > Add New
3. Search "MBR Cookie Consent"
4. Click Install Now > Activate
5. Add the following line to wp-config.php
   define('MBR_CC_FORCE_GEOLOCATION', true);
6. Visit Cookie Consent > Dashboard
7. Click "Generate Cookie Policy Page"
8. Click "Generate Privacy Policy Page"
9. Go to Settings to customize colors/text
10. Test in incognito window

Done! Your site is now compliant.

= Manual Install =

1. Download plugin ZIP
2. Upload to `/wp-content/plugins/`
3. Activate via Plugins menu
4. Follow Quick Install steps 5-9

= First-Time Configuration =

**Basic Setup (5 minutes):**
1. Dashboard > Generate policies
2. Settings > Customize colors
3. Settings > Review categories
4. Test banner

**Advanced Setup (If Needed):**
1. Enable Google Consent Mode (if using GA4/Ads)
2. Enable IAB TCF (if publisher with programmatic ads)
3. Configure page exclusions (if e-commerce)
4. Set up subdomain sharing (if multi-domain)

= Recommended Settings =

**For E-commerce:**
âœ“ Hide on checkout pages
âœ“ Hide on cart pages
âœ“ Enable Google Consent Mode
âœ“ Generate privacy policy

**For Publishers:**
âœ“ Enable IAB TCF v2.3
âœ“ Enable Google ACM
âœ“ Register CMP ID with IAB
âœ“ Configure vendor list

**For International Sites:**
âœ“ Enable auto-translation
âœ“ Or use WPML/Polylang
âœ“ Enable WCAG accessibility
âœ“ Test multiple languages

== Frequently Asked Questions ==

= Is this really 100% free? =

Yes! All features are completely free. No premium version, no upsells, no feature restrictions, no hidden costs. We believe privacy compliance should be accessible to everyone.

= Do I need to register for IAB TCF? =

Only if you're a publisher using programmatic advertising. For basic GDPR/CCPA compliance, IAB registration isn't required. The plugin works perfectly without TCF enabled.

= How does the Privacy Policy Generator work? =

The generator analyzes your site and detects:
- E-commerce (WooCommerce, EDD)
- Analytics (Google Analytics, etc.)
- Advertising (Google Ads, programmatic)
- Email marketing tools
- Contact forms
- Social media integrations
- Enabled privacy frameworks (TCF, Consent Mode, CCPA)

It then generates a comprehensive, customized privacy policy with all relevant sections. You should review it with legal counsel before publishing.

= Does it block Google Analytics? =

Yes! The plugin can:
- Block GA until consent is given
- Integrate with Google Consent Mode v2
- Enable cookieless measurement when denied
- Adjust GA behavior based on consent
- Work with GA4 and Universal Analytics

= Will it slow down my site? =

No. The plugin is highly optimized:
- <10KB JavaScript (gzipped)
- No external API calls
- Efficient database queries
- Cached consent checks
- Async loading
- Minimal server impact

= Can I customize the banner design? =

Absolutely! Multiple options:
- 4 built-in layouts
- Color picker for all elements
- Custom logo upload
- Full custom CSS editor
- Button text customization
- Position and animation control

= Does it work with WooCommerce? =

Yes! Features include:
- Automatic WooCommerce detection
- Hide banner on checkout/cart
- Payment processor detection
- E-commerce privacy sections
- No checkout interference

= What about CCPA compliance? =

Fully supported:
- "Do Not Sell" link option
- California-specific rights in privacy policy
- CCPA consent logging
- Opt-out mechanisms
- Required disclosures

= Can I exclude specific pages? =

Yes! Multiple exclusion methods:
- Quick toggles (login, checkout, cart, account)
- URL patterns with wildcards
- Custom page IDs
- Post type exclusions

Example: `/checkout/*`, `/my-account/*`

= Does consent work across subdomains? =

Yes! Enable "Subdomain Consent Sharing" and consent given on www.example.com applies to shop.example.com, blog.example.com, etc.

= How do I translate the banner? =

Three ways:
1. **Auto-translation** - Detects browser language (40+ languages)
2. **WPML** - Translate strings via WPML String Translation
3. **Polylang** - Translate via Polylang Strings

Auto-translation works out-of-the-box with zero configuration.

= Is it WCAG accessible? =

Yes! Full WCAG 2.1 Level AA compliance:
- Screen reader support (ARIA)
- Keyboard navigation
- Focus indicators
- High contrast mode
- Reduced motion support
- Semantic HTML

Tested with VoiceOver, NVDA, JAWS.

= Can I use it on multiple sites? =

Yes! Use on unlimited sites. No license restrictions, no site limits, no extra fees.

= Does it log consent for audits? =

Yes! Comprehensive logging:
- Timestamp
- IP address (anonymized)
- User ID (if logged in)
- Categories consented
- Consent method
- User agent
- Export to CSV

= What cookies does the plugin use? =

**Always:**
- `mbr_cc_consent` - Stores consent choices

**Optional (if enabled):**
- `euconsent-v2` - IAB TCF consent string
- `mbr_cc_ac_string` - Google ACM consent string

All cookies respect user privacy settings.

= Can I white-label it for clients? =

Yes! Under GPL license you can:
- Modify the code
- Rebrand for clients
- Remove/change credits
- Distribute to clients
- Include in client packages

= How do I get support? =

**Free support via:**
- Documentation (included in plugin)
- Email: info@littlewebshack.com
- Website: https://littlewebshack.com

Response time: Usually 24-48 hours

= Is there a pro version? =

No. There is no pro/premium version. All features are included free forever.

== Screenshots ==

1. Cookie consent banner - Bar layout at bottom
2. Cookie consent banner - Popup layout with overlay
3. Preference center - Manage cookie categories
4. Admin dashboard - Overview and quick actions
5. Settings page - Banner customization options
6. Cookie scanner - Automatic cookie detection
7. Consent logs - GDPR-compliant audit trail
8. Privacy Policy Generator - Intelligent policy creation
9. IAB TCF settings - Advanced publisher features
10. Accessibility settings - WCAG compliance options

== Changelog ==

= 1.4.1 - February 6, 2026 =
* **New:** Intelligent Privacy Policy Generator
* Feature: Automatic site analysis (e-commerce, analytics, advertising)
* Feature: GDPR, CCPA, IAB TCF sections auto-included
* Feature: Third-party service detection and disclosure
* Feature: Children's privacy protection (COPPA)
* Feature: International data transfer sections
* Feature: One-click generation from dashboard
* Note: Generated policies require legal review

= 1.4.0 - February 6, 2026 =
* **New:** IAB Transparency & Consent Framework v2.3
* **New:** Google Additional Consent Mode (ACM)
* Feature: Full __tcfapi JavaScript API
* Feature: TC String generation and storage
* Feature: 10 standard consent purposes
* Feature: 2 special features (geolocation, device scanning)
* Feature: euconsent-v2 cookie storage
* Feature: AC String for Google Ad Tech Providers
* Feature: Google FC (Funding Choices) compatibility
* Feature: Combined TCF + ACM support
* Feature: GVL (Global Vendor List) integration ready
* Feature: Publisher country code configuration
* Feature: Purpose One Treatment option

= 1.3.0 - February 5, 2026 =
* **New:** Page-specific banner controls
* **New:** Custom CSS editor
* **New:** Subdomain consent sharing
* Feature: Quick exclusions (login, checkout, cart, account)
* Feature: URL pattern exclusions with wildcards
* Feature: Built-in CSS editor with class reference
* Feature: Automatic root domain detection
* Feature: Manual domain override for complex TLDs
* Feature: WooCommerce auto-detection
* Feature: Easy Digital Downloads auto-detection
* Feature: Cookie domain configuration
* Feature: Cookie path configuration

= 1.2.0 - February 4, 2026 =
* **New:** Auto-translation (40+ languages)
* **New:** WPML integration
* **New:** Polylang integration
* **New:** WCAG 2.1 AA accessibility compliance
* Feature: Automatic browser language detection
* Feature: Screen reader announcements (ARIA live)
* Feature: Full keyboard navigation
* Feature: Focus trap in modals
* Feature: WCAG 2.1 AA focus indicators
* Feature: High contrast mode CSS support
* Feature: Reduced motion support
* Feature: RTL language support
* Feature: String registration for WPML/Polylang
* Feature: Category translation support

= 1.1.0 - February 3, 2026 =
* **New:** Google Consent Mode v2 integration
* **New:** Microsoft UET Consent Mode
* Feature: All 7 Google consent types
* Feature: Ads data redaction option
* Feature: URL passthrough option
* Feature: Default consent state configuration
* Feature: Automatic consent signal updates
* Feature: Works with existing Google/Microsoft tags

= 1.0.7 - February 2, 2026 =
* **New:** Box layout (bottom-left)
* **New:** Box layout (bottom-right)
* **New:** Popup layout (center with overlay)
* Feature: Responsive design for all layouts
* Feature: Logo centering on box/popup
* Feature: Smooth animations per layout
* CSS: Layout-specific styling
* CSS: Mobile responsive improvements

= 1.0.6 - February 1, 2026 =
* Fix: Nonce verification improvements
* Fix: Input sanitization enhancements
* Fix: Text domain consistency
* Security: Enhanced security measures
* Performance: Code optimization

= 1.0.0 - January 30, 2026 =
* Initial public release
* Feature: Cookie consent banner
* Feature: Automatic script blocking
* Feature: Preference center
* Feature: Consent logging
* Feature: Cookie scanner
* Feature: Policy generator
* Feature: GDPR compliance
* Feature: CCPA support

== Upgrade Notice ==

= 1.4.1 =
Privacy Policy Generator added! Automatically creates comprehensive, intelligent privacy policies based on your site configuration. Highly recommended upgrade for all users.

= 1.4.0 =
Major update: IAB TCF v2.3 and Google Additional Consent Mode for professional publishers and advertisers. Enterprise-grade consent management now available.

= 1.3.0 =
Enhanced customization features including page controls, custom CSS, and subdomain sharing. Recommended for all e-commerce and multi-domain sites.

= 1.2.0 =
Internationalization and accessibility update: 40+ languages and full WCAG compliance. Essential for international and accessible websites.

= 1.1.0 =
Google Consent Mode v2 and Microsoft UET support. Important for sites using Google Analytics, Ads, or Microsoft Advertising.

== Privacy Policy ==

**Data Collection by Plugin:**

MBR Cookie Consent does NOT:
- Collect personal data about your visitors
- Send data to external servers
- Track users across websites
- Make external API calls
- Include analytics or telemetry
- Phone home for updates

The plugin DOES:
- Store consent logs locally in your WordPress database
- Anonymize IP addresses (removes last octet)
- Create cookies only for consent storage
- Respect user privacy choices

**Consent Data Stored:**

When users interact with the banner, the plugin stores:
- Timestamp of consent
- IP address (anonymized)
- User ID (if logged in)
- Categories consented to
- Consent method
- User agent (browser info)

**Data Retention:**

- Consent logs retained indefinitely for compliance
- Can be exported or deleted anytime
- Configurable retention periods available

**Cookies Created:**

- `mbr_cc_consent` (required) - Stores consent choices
- `euconsent-v2` (optional) - IAB TCF consent string
- `mbr_cc_ac_string` (optional) - Google ACM string

All cookies:
- Expire after 365 days (configurable)
- Use SameSite=Lax
- Are HttpOnly where appropriate
- Respect subdomain settings

== Developer Documentation ==

= Hooks & Filters =

**Filters:**

`mbr_cc_banner_text` - Modify banner text
`mbr_cc_cookie_domain` - Customize cookie domain
`mbr_cc_cookie_path` - Customize cookie path
`mbr_cc_consent_categories` - Modify consent categories
`mbr_cc_blocked_scripts` - Customize blocked scripts

**Actions:**

`mbr_cc_consent_given` - Fires when consent given
`mbr_cc_consent_revoked` - Fires when consent revoked
`mbr_cc_banner_displayed` - Fires when banner shown
`mbr_cc_preferences_saved` - Fires when preferences saved

= JavaScript API =

**Events:**

`mbr_cc_consent_saved` - Consent saved
`mbr_cc_consent_updated` - Consent updated
`mbr_cc_banner_shown` - Banner displayed
`mbr_cc_modal_opened` - Preferences modal opened

**TCF API (if enabled):**

`__tcfapi('ping', 2, callback)` - Check CMP status
`__tcfapi('getTCData', 2, callback)` - Get consent data
`__tcfapi('addEventListener', 2, callback)` - Listen for changes
`__tcfapi('removeEventListener', 2, callback, listenerId)` - Remove listener

= Code Examples =

**Check if user has consented:**

`
if (isset($_COOKIE['mbr_cc_consent'])) {
    $consent = json_decode($_COOKIE['mbr_cc_consent'], true);
    if (isset($consent['marketing'])) {
        // User consented to marketing
    }
}
`

**Add custom blocked script:**

`
add_filter('mbr_cc_blocked_scripts', function($scripts) {
    $scripts[] = array(
        'identifier' => 'custom-script',
        'category' => 'marketing',
        'url' => 'https://example.com/script.js'
    );
    return $scripts;
});
`

**Customize banner text:**

`
add_filter('mbr_cc_banner_text', function($text, $context) {
    if ($context === 'heading') {
        return 'Custom Heading';
    }
    return $text;
}, 10, 2);
`

= REST API (Advanced) =

`GET /wp-json/mbr-cookie-consent/v1/consent`
Get current consent status

`POST /wp-json/mbr-cookie-consent/v1/consent`
Save consent programmatically

`GET /wp-json/mbr-cookie-consent/v1/categories`
Get consent categories

Full API documentation in plugin files.

== Credits ==

**Developed by:**
Robert Palmer - Little Web Shack
https://littlewebshack.com
info@littlewebshack.com

**Based on:**
- WordPress Coding Standards
- IAB Europe TCF Specifications
- Google Consent Mode Specifications
- WCAG 2.1 Guidelines

**Special Thanks:**
- WordPress community
- IAB Europe for TCF framework
- Google for Consent Mode specifications
- Accessibility advocates
- Translation contributors
- Beta testers and early adopters

== License ==

GPLv2 or later
https://www.gnu.org/licenses/gpl-2.0.html

You are free to:
- Use on unlimited sites
- Modify the code
- Redistribute
- Use commercially
- White-label for clients

Under the terms that:
- Derivative works must be GPL
- Include license and copyright notices
- State changes made to code

IAB TCF implementation follows IAB Europe's open specifications.
Google Consent Mode follows Google's published specifications.

== Support ==

**Free Support:**
- Email: info@littlewebshack.com
- Website: https://littlewebshack.com/
- Documentation: Included in plugin

**Response Time:**
Typically 24-48 hours for email support

**Before Contacting Support:**
1. Check included documentation
2. Review FAQ above
3. Search WordPress.org support forum
4. Check for plugin conflicts
5. Test with default theme

**When Contacting Support, Include:**
- WordPress version
- PHP version
- Plugin version
- Active theme
- Active plugins
- Error messages
- Steps to reproduce

== Roadmap ==

**Planned Features:**

- Visual banner builder
- Geo-location based consent
- A/B testing for banner variations
- Additional banner animations
- Advanced analytics dashboard
- More third-party integrations
- API for developers
- Import/export settings

**Suggestions Welcome:**
Email feature requests to info@littlewebshack.com

We actively develop based on user feedback!

== Legal Disclaimer ==

This plugin provides technical tools to help implement cookie consent mechanisms and generate policy documents. 

**It does NOT:**
- Constitute legal advice
- Guarantee legal compliance
- Replace legal counsel
- Provide regulatory guidance

**You are responsible for:**
- Ensuring compliance with applicable laws
- Reviewing generated policies with legal counsel
- Configuring the plugin appropriately
- Keeping privacy policies up to date
- Handling user data requests properly

**Consult legal counsel** for advice on:
- GDPR compliance
- CCPA compliance
- IAB TCF registration
- Privacy policy accuracy
- Data protection requirements

The plugin developer is not liable for regulatory penalties, legal issues, or misuse of the plugin.


Generated privacy and cookie policies are templates requiring professional legal review before publication.
